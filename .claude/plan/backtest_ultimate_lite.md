# 回测系统终极优化方案 - Lite版

## 方案概述

**目标**: 将回测系统从"数据展示"升级为"策略优化驱动引擎"

**约束条件**:
- 后端资源: 1核1G内存
- 存储限制: ≤10GB
- 架构要求: 可平滑升级到微服务

**核心功能**:
- ✅ 多策略组合回测（串行执行）
- ✅ 参数优化（网格搜索 + 小规模遗传算法）
- ✅ 实时数据流模拟交易
- ✅ 复杂可视化（3D参数热力图、交互式权益曲线）
- ✅ 优化闭环（策略版本管理 + AI建议）

---

## 实施计划（6-8周）

### Phase 1: 核心引擎 + 存储优化（Week 1-2）
- 模块化架构（接口抽象 + 依赖注入）
- 统一回测引擎
- K线数据去重与压缩
- 扩展数据库Schema
- 存储监控服务

### Phase 2: 参数优化（Week 3-4）
- 网格搜索（串行 + 进度推送）
- 遗传算法（小规模）
- 策略版本管理

### Phase 3: 高级可视化（Week 5-6）
- 场景识别
- AI建议生成器
- 3D热力图数据端点

### Phase 4: 实时模拟与闭环（Week 7-8）
- 流式回放引擎
- 实时模拟API
- 配置应用到生产

详细架构设计见完整文档。
