## Phase 3: 极限优化（极高风险）

**目标**：日收益率 10%+
**预估工作量**：18 任务点
**风险等级**：⚠️ 极高风险
**前置条件**：Phase 2 稳定运行至少5天，日收益率达到5%+，且最大回撤<20%

---

### ⚠️ Phase 3 特别警告

**进入此阶段前必须满足：**
1. 账户余额已提取50%作为保护（防止全部亏损）
2. 已设置硬件止损（交易所层面）
3. 已准备好接受100%本金损失
4. 已制定详细的退出策略

**此阶段配置可能导致：**
- 单日回撤30%+
- 连续亏损导致爆仓
- 极端行情下秒级爆仓

---

### 模块 I：仓位提升至15-20%（5 任务点）

**文件**: `config.py`

- [ ] **任务 I.1**：提升基础仓位至15%（1 点）
  - **输入**：Phase 2 配置（10%仓位）
  - **输出**：15%仓位配置
  - **关键步骤**：
    1. `POSITION_SIZE_PERCENT` 从 0.10 提升至 0.15（15%）
    2. 保持 `LEVERAGE = 10`
    3. 有效仓位：15% × 10 = 150%（超满仓）
  - **预期收益**：单笔收益提升50%
  - **风险评估**：极高（超满仓，极易爆仓）

- [ ] **任务 I.2**：激进场景下提升至20%（1 点）
  - **输入**：15%仓位配置
  - **输出**：20%仓位配置（仅在Policy激进模式下）
  - **关键步骤**：
    1. 修改 `policy_layer.py` 激进模式仓位倍数至 1.33
    2. 15% × 1.33 = 20%仓位
    3. 有效仓位：20% × 10 = 200%
  - **预期收益**：激进模式下单笔收益翻倍
  - **风险评估**：极高

- [ ] **任务 I.3**：禁用Kelly公式限制（1 点）
  - **输入**：当前Kelly配置
  - **输出**：禁用Kelly限制
  - **关键步骤**：
    1. `USE_KELLY_CRITERION` 改为 False
    2. 或将 `KELLY_FRACTION` 提升至 1.0（满Kelly）
    3. 移除 `MIN_WIN_RATE_FOR_KELLY` 限制
  - **预期收益**：仓位不受Kelly限制
  - **风险评估**：极高

- [ ] **任务 I.4**：禁用波动率减仓（1 点）
  - **输入**：当前波动率配置
  - **输出**：禁用波动率限制
  - **关键步骤**：
    1. `REDUCE_SIZE_ON_HIGH_VOL` 改为 False
    2. 或将 `VOLATILITY_SIZE_FACTOR` 提升至 1.0（不减仓）
    3. 高波动时保持满仓
  - **预期收益**：高波动时不减仓，捕获大行情
  - **风险评估**：极高

- [ ] **任务 I.5**：禁用分批建仓（1 点）
  - **输入**：当前分批建仓配置
  - **输出**：禁用分批建仓
  - **关键步骤**：
    1. `USE_PARTIAL_POSITION` 改为 False
    2. 所有信号一次性满仓
    3. 提升建仓速度
  - **预期收益**：建仓速度提升200%
  - **风险评估**：极高

---

### 模块 J：杠杆提升至15-20x（4 任务点）

**文件**: `config.py`

- [ ] **任务 J.1**：提升杠杆至15x（1 点）
  - **输入**：当前杠杆配置（10x）
  - **输出**：15x杠杆配置
  - **关键步骤**：
    1. `LEVERAGE` 从 10 提升至 15
    2. 调用交易所API设置杠杆
    3. 有效仓位：15% × 15 = 225%
  - **预期收益**：单笔收益提升50%
  - **风险评估**：极高（爆仓风险大幅增加）

- [ ] **任务 J.2**：极限场景下提升至20x（1 点）
  - **输入**：15x杠杆配置
  - **输出**：20x杠杆配置
  - **关键步骤**：
    1. `LEVERAGE` 从 15 提升至 20
    2. 有效仓位：15% × 20 = 300%
    3. 仅在连续盈利5次后启用
  - **预期收益**：单笔收益再提升33%
  - **风险评估**：极高

- [ ] **任务 J.3**：调整保证金模式（1 点）
  - **输入**：当前保证金模式（crossed）
  - **输出**：评估是否切换至逐仓
  - **关键步骤**：
    1. 评估 `MARGIN_MODE` 是否改为 "isolated"
    2. 逐仓模式可防止全仓爆仓
    3. 但会限制单笔盈利
  - **预期收益**：降低爆仓风险（但限制收益）
  - **风险评估**：中等（权衡选择）

- [ ] **任务 J.4**：设置硬件止损（1 点）
  - **输入**：当前止损配置
  - **输出**：交易所层面止损
  - **关键步骤**：
    1. 在交易所设置账户级止损（如总资产<50%强制平仓）
    2. 设置单笔最大亏损限制
    3. 确保止损优先级高于系统止损
  - **预期收益**：防止极端行情爆仓
  - **风险评估**：低（保护机制）

---

### 模块 K：多策略并行执行（4 任务点）

**文件**: `config.py`, `bot.py`, `trader.py`

- [ ] **任务 K.1**：启用所有策略（1 点）
  - **输入**：当前策略列表
  - **输出**：全策略启用
  - **关键步骤**：
    1. 启用所有策略：`bollinger_trend`, `bollinger_breakthrough`, `rsi_divergence`, `macd_cross`, `ema_cross`, `kdj_cross`, `adx_trend`, `volume_breakout`, `multi_timeframe`, `composite_score`
    2. 移除策略黑名单
    3. 降低策略一致性要求至0.25
  - **预期收益**：交易机会增加100%
  - **风险评估**：高

- [ ] **任务 K.2**：允许多仓位并行（2 点）
  - **输入**：当前单仓位限制
  - **输出**：多仓位并行
  - **关键步骤**：
    1. 修改 `bot.py` 允许同时持有多个仓位
    2. 每个策略独立开仓（最多3个仓位）
    3. 总仓位限制：15% × 3 = 45%
  - **预期收益**：同时捕获多个机会
  - **风险评估**：极高（多仓位风险叠加）
  - **技术难度**：高（需要重构代码）

- [ ] **任务 K.3**：启用对冲策略（1 点）
  - **输入**：当前单向持仓
  - **输出**：允许多空对冲
  - **关键步骤**：
    1. 允许同时持有多头和空头仓位
    2. 震荡市时启用对冲
    3. 趋势市时单向持仓
  - **预期收益**：震荡市也能盈利
  - **风险评估**：高
  - **技术难度**：中等

---

### 模块 L：激进风控模式（5 任务点）

**文件**: `config.py`, `policy_layer.py`

- [ ] **任务 L.1**：扩大止盈至10-15%（1 点）
  - **输入**：Phase 2 配置（8%止盈）
  - **输出**：10-15%止盈配置
  - **关键步骤**：
    1. `TAKE_PROFIT_PERCENT` 从 0.08 提升至 0.12（12%）
    2. 策略级止盈：`multi_timeframe` 提升至 15%
    3. `TRAILING_STOP_PERCENT` 提升至 0.08（8%）
  - **预期收益**：单笔收益提升50%
  - **风险评估**：高

- [ ] **任务 L.2**：放宽止损至8%（1 点）
  - **输入**：Phase 2 配置（6%止损）
  - **输出**：8%止损配置
  - **关键步骤**：
    1. `STOP_LOSS_PERCENT` 从 0.06 提升至 0.08（8%）
    2. `ATR_STOP_MULTIPLIER` 提升至 6.0
    3. 策略级止损相应调整
  - **预期收益**：减少被止损次数
  - **风险评估**：极高（单笔亏损增加）

- [ ] **任务 L.3**：禁用移动止损（1 点）
  - **输入**：当前移动止损配置
  - **输出**：禁用移动止损
  - **关键步骤**：
    1. `ENABLE_TRAILING_TAKE_PROFIT` 改为 False
    2. 或大幅放宽移动止损阈值
    3. 让盈利单充分发展
  - **预期收益**：盈利单收益最大化
  - **风险评估**：高（可能回撤）

- [ ] **任务 L.4**：提升单日最大亏损至20%（1 点）
  - **输入**：Phase 2 配置（10%熔断）
  - **输出**：20%熔断配置
  - **关键步骤**：
    1. `MAX_DAILY_LOSS_PCT` 从 0.10 提升至 0.20（20%）
    2. 增加15%预警阈值
    3. 确保熔断机制正常
  - **预期收益**：避免过早熔断
  - **风险评估**：极高

- [ ] **任务 L.5**：禁用所有过滤器（1 点）
  - **输入**：当前过滤器配置
  - **输出**：禁用所有过滤器
  - **关键步骤**：
    1. `ENABLE_EXECUTION_FILTER = False`
    2. `ENABLE_DIRECTION_FILTER = False`
    3. `ENABLE_ML_FILTER = False`
    4. `ENABLE_CLAUDE_ANALYSIS = False`
  - **预期收益**：信号通过率100%
  - **风险评估**：极高（无质量把关）

---

**Phase 3 预期成果：**
- 日收益率：10-15%
- 交易频率：20-30次/天
- 胜率要求：40%+（盈亏比优势）
- 最大回撤：30-50%
- **爆仓概率**：>50%

---

